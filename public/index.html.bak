<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-powered running form analysis using MediaPipe pose detection. Analyze your running technique for better performance and injury prevention.">
    <meta name="keywords" content="running, form analysis, pose detection, MediaPipe, AI, sports technology">
    <meta name="author" content="RunForm.AI">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>RunForm.AI - Running Form Analysis</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸƒâ€â™‚ï¸</text></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- MediaPipe Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
    
    <!-- Demo Configuration -->
    <script src="demo-config.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸƒâ€â™‚ï¸ RunForm.AI</h1>
            <p>AI-Powered Running Form Analysis</p>
            <div class="tips-banner">
                <p id="rotatingTip">ğŸ’¡ Tip: Record from the side view for best results</p>
            </div>
        </header>

        <div class="main-content">
            <!-- Input Section -->
            <div class="input-section">
                <div class="input-options">
                    <button id="webcamBtn" class="btn btn-primary" aria-label="Start camera recording">
                        ğŸ“¹ Record with Camera
                    </button>
                    <button id="uploadBtn" class="btn btn-secondary" aria-label="Upload video file">
                        ğŸ“ Upload Video
                    </button>
                    <input type="file" id="videoUpload" accept="video/*" style="display: none;" aria-label="Video file input">
                </div>

                <!-- Camera Section -->
                <div id="cameraSection" class="camera-section" style="display: none;">
                    <video id="webcam" autoplay muted playsinline aria-label="Camera preview"></video>
                    <div class="camera-controls">
                        <button id="startRecording" class="btn btn-success" aria-label="Start recording">Start Recording</button>
                        <button id="stopRecording" class="btn btn-danger" style="display: none;" aria-label="Stop recording">Stop Recording</button>
                    </div>
                </div>
            </div>

            <!-- Video Analysis Section -->
            <div class="video-section">
                <div class="canvas-container">
                    <canvas id="outputCanvas" width="640" height="480"></canvas>
                    <div class="video-controls" id="videoControls" style="display: none;">
                        <button class="control-btn" id="playPauseBtn" title="Play/Pause">â¯ï¸</button>
                        <button class="control-btn" id="stepBackBtn" title="Step Back">â®ï¸</button>
                        <button class="control-btn" id="stepForwardBtn" title="Step Forward">â­ï¸</button>
                        <button class="control-btn" id="slowMotionBtn" title="Slow Motion">ğŸŒ</button>
                        <span class="frame-info" id="frameInfo">Frame: 0</span>
                    </div>
                </div>
                
                <!-- Analysis Status Indicator -->
                <div class="analysis-status" id="analysisStatus" style="display: none;">
                    <div class="status-content">
                        <span class="status-text">Ready</span>
                        <div class="status-progress"></div>
                    </div>
                </div>

                <!-- Enhanced Progress Section -->
                <div class="progress-section" id="progressSection" style="display: none;">
                    <div class="progress-header">
                        <h4>ğŸ” Analyzing Running Form</h4>
                        <span class="progress-text" id="progressText">Initializing...</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                    </div>
                    <div class="progress-details" id="progressDetails">
                        <span>Frames processed: <strong id="framesProcessed">0</strong></span>
                        <span>Issues detected: <strong id="issuesDetected">0</strong></span>
                        <span>Quality: <strong id="currentQuality">Analyzing...</strong></span>
                    </div>
                </div>
            </div>

            <!-- Hidden Video Element -->
            <video id="inputVideo" controls style="display: none;" aria-label="Uploaded video"></video>
            
            <!-- Analysis Controls -->
            <div class="controls">
                <button id="analyzeBtn" class="btn btn-primary" disabled aria-label="Start analysis">
                    ğŸ” Analyze Running Form
                </button>
                <button id="resetBtn" class="btn btn-secondary" aria-label="Reset application">
                    ğŸ”„ Reset
                </button>
            </div>

            <!-- Feedback Section -->
            <div id="feedbackSection" class="feedback-section" style="display: none;">
                <h3>ğŸ“Š Analysis Results</h3>
                <div id="feedbackContent" class="feedback-content">
                    <!-- Feedback will be populated here -->
                </div>
                
                <div class="export-section">
                    <button id="exportBtn" class="btn btn-success" aria-label="Export analysis results">
                        ğŸ“¸ Export Results
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay" style="display: none;" role="dialog" aria-labelledby="loadingText">
            <div class="loading-content">
                <div class="spinner" aria-hidden="true"></div>
                <p id="loadingText">Analyzing your running form...</p>
                <p id="loadingSubtext">This may take 10-30 seconds</p>
            </div>
        </div>

        <!-- MediaPipe Loading Overlay -->
        <div id="mediapipeLoading" class="loading-overlay" style="display: flex;" role="dialog" aria-labelledby="mediapipeLoadingText">
            <div class="loading-content">
                <div class="spinner" aria-hidden="true"></div>
                <p id="mediapipeLoadingText">ğŸƒâ€â™‚ï¸ Loading RunForm.AI...</p>
                <p id="mediapipeLoadingSubtext">Initializing pose detection models</p>
            </div>
        </div>

        <!-- Privacy Notice -->
        <div class="privacy-notice">
            <p>ğŸ”’ <strong>Privacy-First:</strong> All analysis happens locally in your browser. No data is sent to servers.</p>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <p>Built with â¤ï¸ using MediaPipe â€¢ <a href="https://github.com/runform-ai" target="_blank" rel="noopener">GitHub</a></p>
        </footer>
    </div>

    <!-- Main Application Script -->
    <script src="app.js"></script>
</body>
</html> 